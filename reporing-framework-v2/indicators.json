[
    {
        "name":"encounters",
        "label":"encounters",
        "description": "Total # of encounters",
        "expression": "true"
    },
    {
        "name":"patients",
        "label":"patients",
        "description": "Total # of patients who have had an encounter within selected period",
        "expression": "true"

    },
    {
        "name":"on_arvs",
        "label":"on arvs",
        "description": "Total # of patients who are on ARVs",
        "expression": "cur_arv_line is not null"
    },
    {
        "name":"art_net_cohort_at_12_months",
        "label":"art net cohort at 12 months",
        "description": "ART Net Cohort at 12 months",
        "expression": "coalesce(transfer_out, out_of_care) is null"
    },
    {
        "name":"on_arvs_first_line",
        "label":"on arvs first line",
        "description": "# of patient on ARVs first line",
        "expression": "cur_arv_line=1"
    },
    {
        "name":"total_on_therapy_at_12_months",
        "label":"total on therapy at 12 months",
        "description":"# of patients on therapy at 12 months",
        "expression":"coalesce(t1.death_date, coalesce(transfer_out, out_of_care)) is null and t1.rtc_date>=DATE_SUB(@startDate, INTERVAL 6 MONTH)"
    },
    {
        "name":"on_arvs_second_line",
        "label":"on arvs second line",
        "description": "# of patient on ARVs second line",
        "expression": "cur_arv_line=2 and coalesce(transfer_out, out_of_care) is null"
    },
    {
        "name":"on_arvs_third_line",
        "label":"on arvs third line",
        "description": "# of patient on ARVs third line",
        "expression": "cur_arv_line>2"
    },
    {
        "name":"vl_done_past_year",
        "label":"vl done past year",
        "description": "# of patient(s) whose Viral Load have been taken in the past 1 year",
        "expression": "timestampdiff(week,vl_1_date,encounter_datetime) <= 52"
    },
    {
        "name": "vl_done_past_year_relative_to_end_date",
        "label": "vl done past year relative to end date",
        "description": "# of patient(s) whose Viral Load have been taken in the past 1 year",
        "expression": "timestampdiff(week,vl_1_date,@endDate) <= 52"
    },
    {
        "name":"no_vl_done_past_year",
        "label":"no vl done past year",
        "description": "# of patient(s) whose Viral Load have not been taken in the past 1 year",
        "expression": "cur_arv_line is not null and (vl_1_date is null or timestampdiff(week,vl_1_date,encounter_datetime) >= 52)"
    },
    {
        "name":"vl_done_past_year_lte_1000",
        "label":"vl done past year lte 1000",
        "description": "# of patient(s) whose Viral Load is Less Than or Equal to 1000",
        "expression": "timestampdiff(week,vl_1_date,encounter_datetime) <= 52 and vl_1 <= 1000"
    },
    {
        "name":"vl_done_past_year_gt_1000",
        "label":"vl done past year gt 1000",
        "description": "# of patient(s) whose Viral Load is Greater Than 1000",
        "expression": "timestampdiff(week,vl_1_date,encounter_datetime) <= 52 and vl_1 > 1000"
    },
    {
        "name":"vl_done_this_encounter",
        "label":"vl done this encounter",
        "description": "# of patient(s) whose Viral Load has been taken in this encounter",
        "expression": "vl_resulted >= 0 and vl_resulted_date=date(encounter_datetime)"
    },
    {
        "name":"vl_done_this_encounter_lte_1000",
        "label":"vl done this encounter lte 1000",
        "description": "# of patient(s) whose Viral Load in this encounter is Less Than 1000",
        "expression": "vl_resulted <= 1000 and vl_resulted_date = date(encounter_datetime)"
    },
    {
        "name":"vl_done_this_encounter_gt_1000",
        "label":"vl done this encounter gt 1000",
        "description": "# of patient(s) whose Viral Load in this encounter is Greater Than 1000",
        "expression": "vl_resulted > 1000 and vl_resulted_date = date(encounter_datetime)"
    },
    {
        "name":"vl_ordered",
        "label":"vl ordered",
        "description": "# of patient(s) whose Viral Load has been ordered",
        "expression": "vl_order_date=encounter_datetime"
    },
    {
        "name":"pending_vl_order",
        "label":"pending vl order",
        "description": "# of patient(s) whose Viral Load has been Ordered but awaiting result",
        "expression": "timestampdiff(week,vl_order_date,encounter_datetime) >= 0 and vl_1_date < vl_order_date"
    },
    {
        "name":"pending_vl_order_no_result_after_4_weeks",
        "label":"pending vl order no result after 4 weeks",
        "description": "# of patient(s) whose Pending Viral Load Result is missing even after 4 weeks",
        "expression": "timestampdiff(week,vl_order_date,encounter_datetime) >= 4 and vl_1_date < vl_order_date"
    },
    {
        "name":"on_arvs_lte_26_weeks",
        "label":"on arvs lte 26 weeks",
        "description": "# of patient(s) who have been on ARVs for the last 26 weeks or less",
        "expression": "timestampdiff(week,arv_start_date,encounter_datetime) <= 26"
    },
    {
        "name":"on_arvs_lte_52_weeks",
        "label":"on arvs lte 52 weeks",
        "description": "# of patient(s) who have been on ARVs for the last 52 weeks or less",
        "expression": "timestampdiff(week,arv_start_date,encounter_datetime) <= 52"
    },
    {
        "name":"on_arvs_lte_52_weeks_and_have_vl",
        "label":"on arvs lte 52 weeks and have vl",
        "description": "# of patient(s) who have been on ARVs for the last 52 weeks or less and have Viral Load",
        "expression": "timestampdiff(week,arv_start_date,encounter_datetime) <= 52 and timestampdiff(week,vl_1_date,encounter_datetime) <= 52"
    },
    {
        "name":"on_arvs_lte_52_weeks_and_have_vl_lte_1000",
        "label":"on arvs lte 52 weeks and have vl lte 1000",
        "description": "# of patient(s) who have been on ARVs for the last 52 weeks or less and their Viral Load is Less Than or Equal to 1000",
        "expression": "timestampdiff(week,arv_start_date,encounter_datetime) <= 52 and timestampdiff(week,vl_1_date,encounter_datetime) <= 52 and vl_1 <= 1000"
    },
    {
        "name": "pregnant",
        "label":"pregnant",
        "description": "# of pregnant patients in a given time period",
        "expression": "edd > encounter_datetime"
    },
    {
        "name":"pregnant_and_on_arvs",
        "label":"pregnant and on arvs",
        "description": "# of pregnant patients and are on ARVs in a given time period",
        "expression": "edd > encounter_datetime and cur_arv_line is not null"
    },
    {
        "name":"on_pcp_prophylaxis",
        "label":"on pcp prophylaxis",
        "description": "on PCP prophylaxis",
        "expression": "encounter_datetime >= pcp_prophylaxis_start_date and coalesce(t1.death_date, out_of_care) is null"
    },
    {
        "name":"on_pcp_prophylaxis_males_below_15",
        "label":"on pcp prophylaxis males below 15",
        "description": "Total # of male patients less than 15 who are on PCP prophylaxis",
        "expression": "encounter_datetime >= pcp_prophylaxis_start_date and gender='M' and timestampdiff(year,birthdate,@endDate) < 15 and coalesce(t1.death_date, out_of_care) is null"

    },
    {
        "name":"on_pcp_prophylaxis_females_below_15",
        "label":"on pcp prophylaxis females below 15",
        "description": "Total # of female patients less than 15 who are on PCP prophylaxis",
        "expression": "encounter_datetime >= pcp_prophylaxis_start_date and gender='F' and timestampdiff(year,birthdate,@endDate) < 15 and coalesce(t1.death_date, out_of_care) is null"
    },
    {
        "name":"on_pcp_prophylaxis_males_15_and_above",
        "label":"on pcp prophylaxis males 15 and above",
        "description": "Total # of male patients 15 and older who are on PCP prophylaxis",
        "expression": "encounter_datetime >= pcp_prophylaxis_start_date and gender='M' and timestampdiff(year,birthdate,@endDate) >= 15 and coalesce(t1.death_date, out_of_care) is null"
    },
    {
        "name":"on_pcp_prophylaxis_below_15",
        "label":"on pcp prophylaxis below 15",
        "description": "Total # of female patients less than 15 who are on PCP prophylaxis",
        "expression": "encounter_datetime >= pcp_prophylaxis_start_date and timestampdiff(year,birthdate,@endDate) < 15 and coalesce(t1.death_date, out_of_care) is null"
    },
    {
        "name":"on_pcp_prophylaxis_females_15_and_above",
        "label":"on pcp prophylaxis females 15 and above",
        "description": "Total # of female patients 15 and older who are on PCP prophylaxis",
        "expression": "encounter_datetime >= pcp_prophylaxis_start_date and gender='F' and timestampdiff(year,birthdate,@endDate) >= 15 and coalesce(t1.death_date, out_of_care) is null"

    },
    {
        "name":"hiv_exposed_infants_below_2_months",
        "label":"hiv exposed infants 2 months and below",
        "description": "Total # of infants below 2 months who are exposed to hiv",
        "expression": "hiv_rapid_test_resulted is not null and DATEDIFF(birthdate, @endDate) <= 60 and coalesce(t1.death_date, out_of_care) is null"
    },
    {
        "name":"hiv_exposed_infants_on_pcp_prophylaxis_2_months_and_below",
        "label":"hiv exposed infants on pcp prophylaxis 2 months and below",
        "description": "Total # of hiv exposed infants 2 months and below who are on PCP prophylaxis",
        "expression": "hiv_rapid_test_resulted is not null and encounter_datetime >= pcp_prophylaxis_start_date and DATEDIFF(birthdate, @endDate) <= 60 and coalesce(t1.death_date, out_of_care) is null"

    },
    {
        "name":"on_pcp_prophylaxis_15_and_above",
        "label":"on pcp prophylaxis 15 and above",
        "description": "Total # of female patients 15 and older who are on PCP prophylaxis",
        "expression": "encounter_datetime >= pcp_prophylaxis_start_date and timestampdiff(year,birthdate,@endDate) >= 15 and coalesce(t1.death_date, out_of_care) is null"

    },
    {
        "name":"enrolled_in_care_total",
        "label":"enrolled in care total",
        "description": "Total # of patients enrolled in care",
        "expression": "(date(prev_clinical_datetime_hiv) between @startDate and @endDate  or prev_clinical_datetime_hiv is null) and date(enrollment_date) between @startDate and @endDate"

    },
    {
        "name":"enrolled_in_care_males_lt_one",
        "label":"enrolled in care males lt one",
        "description": "Total # of male patients < 1 yr enrolled in care",
        "expression": "(date(prev_clinical_datetime_hiv) between @startDate and @endDate  or prev_clinical_datetime_hiv is null) and gender='M' and timestampdiff(year,birthdate,@endDate) < 1 and date(enrollment_date) between @startDate and @endDate"
    },
    {
        "name":"enrolled_in_care_females_lt_one",
        "label":"enrolled in care females lt one",
        "description": "Total # of female patients < 1 yr enrolled in care",
        "expression": "(date(prev_clinical_datetime_hiv) between @startDate and @endDate  or prev_clinical_datetime_hiv is null) and gender='F' and timestampdiff(year,birthdate,@endDate) < 1 and date(enrollment_date) between @startDate and @endDate"

    },
    {
        "name":"enrolled_in_care_males_below_15",
        "label":"enrolled in care males below 15",
        "description": "Total # of male patients below 15 enrolled in care",
        "expression": "(date(prev_clinical_datetime_hiv) between @startDate and @endDate  or prev_clinical_datetime_hiv is null) and gender='M'  and timestampdiff(year,birthdate,@endDate) < 15 and date(enrollment_date) between @startDate and @endDate"
    },
    {
        "name":"enrolled_in_care_females_below_15",
        "label":"enrolled in care females below 15",
        "description": "Total # of female patients below 15 enrolled in care",
        "expression": "(date(prev_clinical_datetime_hiv) between @startDate and @endDate  or prev_clinical_datetime_hiv is null) and gender='F' and timestampdiff(year,birthdate,@endDate) < 15 and date(enrollment_date) between @startDate and @endDate"
    },
    {
        "name":"enrolled_in_care_males_15_and_older",
        "label":"enrolled in care males 15 and older",
        "description": "Total # of male patients 15 and older enrolled in care",
        "expression": "(date(prev_clinical_datetime_hiv) between @startDate and @endDate  or prev_clinical_datetime_hiv is null) and gender='M' and timestampdiff(year,birthdate,@endDate) >= 15 and date(enrollment_date) between @startDate and @endDate"

    },
    {
        "name":"enrolled_in_care_females_15_and_older",
        "label":"enrolled in care females 15 and older",
        "description": "Total # of female patients 15 and older enrolled in care",
        "expression": "(date(prev_clinical_datetime_hiv) between @startDate and @endDate  or prev_clinical_datetime_hiv is null) and gender='F' and timestampdiff(year,birthdate,@endDate) >= 15 and date(enrollment_date) between @startDate and @endDate"
    },
    {
        "name":"currently_in_care_total",
        "label":"currently in care total",
        "description": "Total # of patients currently in care",
        "expression": "encounter_datetime >= enrollment_date and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"currently_in_care_males_lt_one",
        "label":"currently in care males lt one",
        "description": "Total # of male patients < 1 yr currently in care",
        "expression": "encounter_datetime >= enrollment_date and gender='M' and timestampdiff(year,birthdate,@endDate) < 1 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"currently_in_care_females_lt_one",
        "label":"currently in care females lt one",
        "description": "Total # of female patients < 1 yr currently in care",
        "expression": "encounter_datetime >= enrollment_date and gender='F' and timestampdiff(year,birthdate,@endDate) < 1 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"currently_in_care_males_below_15",
        "label":"currently in care males below 15",
        "description": "Total # of male patients below 15 currently in care",
        "expression": "encounter_datetime >= enrollment_date and gender='M' and timestampdiff(year,birthdate,@endDate) < 15 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"currently_in_care_females_below_15",
        "label":"currently in care females below 15",
        "description": "Total # of female patients below 15 currently in care",
        "expression": "encounter_datetime >= enrollment_date and gender='F'  and timestampdiff(year,birthdate,@endDate) < 15 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"currently_in_care_males_15_and_older",
        "label":"currently in care males 15 and older",
        "description": "Total # of male patients 15 and older currently in care",
        "expression": "encounter_datetime >=enrollment_date and gender='M' and timestampdiff(year,birthdate,@endDate) >= 15 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"currently_in_care_females_15_and_older",
        "label":"currently in care females 15 and older",
        "description": "Total # of female patients 15 and older currently in care",
        "expression": "encounter_datetime >= enrollment_date and gender='F' and timestampdiff(year,birthdate,@endDate) >= 15 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"starting_art_total",
        "label":"starting art total",
        "description": "Total # of patients starting ART",
        "expression": "arv_first_regimen_start_date is not null and date(encounter_datetime) = date(arv_first_regimen_start_date) and (date(arv_first_regimen_start_date) between @startDate and @endDate) and cur_arv_meds is not null and prev_arv_meds is null"
    },
    {
        "name":"starting_art_males_lt_one",
        "label":"starting art males lt one",
        "description": "Total # of male patients < 1 yr starting ART",
        "expression": "arv_first_regimen_start_date is not null and date(encounter_datetime) = date(arv_first_regimen_start_date) and gender='M' and timestampdiff(year,birthdate,@endDate) < 1 and (date(arv_first_regimen_start_date) between @startDate and @endDate) and cur_arv_meds is not null and prev_arv_meds is null"
    },
    {
        "name":"starting_art_females_lt_one",
        "label":"starting art females lt one",
        "description": "Total # of female patients < 1 yr starting ART",
        "expression": "arv_first_regimen_start_date is not null and date(encounter_datetime) = date(arv_first_regimen_start_date) and gender='F' and timestampdiff(year,birthdate,@endDate) < 1 and (date(arv_first_regimen_start_date) between @startDate and @endDate) and cur_arv_meds is not null and prev_arv_meds is null"

    },
    {
        "name":"starting_art_males_below_15",
        "label":"starting art males below 15",
        "description": "Total # of male patients below 15 starting ART",
        "expression": "arv_first_regimen_start_date is not null and date(encounter_datetime) = date(arv_first_regimen_start_date) and gender='M' and timestampdiff(year,birthdate,@endDate) < 15 and (date(arv_first_regimen_start_date) between @startDate and @endDate) and cur_arv_meds is not null and prev_arv_meds is null"

    },
    {
        "name":"starting_art_females_below_15",
        "label":"starting art females below 15",
        "description": "Total # of female patients below 15 starting ART",
        "expression": "arv_first_regimen_start_date is not null and date(encounter_datetime) = date(arv_first_regimen_start_date) and gender='F' and timestampdiff(year,birthdate,@endDate) < 15 and (date(arv_first_regimen_start_date) between @startDate and @endDate) and cur_arv_meds is not null and prev_arv_meds is null"

    },
    {
        "name":"starting_art_males_15_and_older",
        "label":"starting art males 15 and older",
        "description": "Total # of male patients 15 and older starting ART",
        "expression": "arv_first_regimen_start_date is not null and date(encounter_datetime) = date(arv_first_regimen_start_date) and gender='M' and timestampdiff(year,birthdate,@endDate) >= 15 and (date(arv_first_regimen_start_date) between @startDate and @endDate) and cur_arv_meds is not null and prev_arv_meds is null"
    },
    {
        "name":"starting_art_females_15_and_older",
        "label":"starting art females 15 and older",
        "description": "Total # of female patients 15 and older starting ART",
        "expression": "arv_first_regimen_start_date is not null and date(encounter_datetime) = date(arv_first_regimen_start_date) and gender='F' and timestampdiff(year,birthdate,@endDate) >= 15 and (date(arv_first_regimen_start_date) between @startDate and @endDate) and cur_arv_meds is not null and prev_arv_meds is null"
    },
    {
        "name": "starting_art_and_has_tb",
        "label": "starting_art_and_has_tb",
        "description": "Starting ART and has TB",
        "expression": "(tb_tx_start_date is not null and timestampdiff(year,tb_tx_start_date,@startDate) <= 1) and (date(encounter_datetime) = date(arv_first_regimen_start_date) and (date(arv_first_regimen_start_date) between @startDate and @endDate) and cur_arv_meds is not null and prev_arv_meds is null)"
    },
    {
        "name":"revisits_on_art_total",
        "label":"revisits on art total",
        "description": "Total # of patient revisits on ART",
        "expression": "encounter_datetime > arv_start_date and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"revisits_on_art_males_lt_one",
        "label":"revisits on art males lt one",
        "description": "Total # of male patients < 1 yr revisits on ART",
        "expression": "encounter_datetime > arv_start_date and gender='M' and timestampdiff(year,birthdate,@endDate) < 1 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"revisits_on_art_females_lt_one",
        "label":"revisits on art females lt one",
        "description": "Total # of female patients < 1 yr revisits on ART",
        "expression": "encounter_datetime > arv_start_date and gender='F' and timestampdiff(year,birthdate,@endDate) < 1 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"revisits_on_art_males_below_15",
        "label":"revisits on art males below 15",
        "description": "Total # of male patients below 15 revisits on ART",
        "expression": "encounter_datetime > arv_start_date and gender='M' and timestampdiff(year,birthdate,@endDate) < 15 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"revisits_on_art_females_below_15",
        "label":"revisits on art females below 15",
        "description": "Total # of female patients between 1 and 15 revisits on ART",
        "expression": "encounter_datetime > arv_start_date and gender='F' and timestampdiff(year,birthdate,@endDate) < 15 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name": "revisits_on_art_males_15_and_older",
        "label":"revisits on art males 15 and older",
        "description": "Total # of male patients 15 and older revisits on ART",
        "expression": "encounter_datetime > arv_start_date and gender='M' and timestampdiff(year,birthdate,@endDate) >= 15 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"revisits_on_art_females_15_and_older",
        "label":"revisits on art females 15 and older",
        "description": "Total # of female patients 15 and older revisits on ART",
        "expression": "encounter_datetime > arv_start_date and gender='F' and timestampdiff(year,birthdate,@endDate) >= 15 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"on_art_total",
        "label":"on art total",
        "description": "Total # of patients on ART",
        "expression": "encounter_datetime >= arv_start_date and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"not_on_art_total",
        "label":"not on art total",
        "description": "Total # of patients not on ART",
        "expression": "(encounter_datetime < arv_start_date  or arv_start_date is null) and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"on_art_males_lt_one",
        "label":"on art males lt one",
        "description": "Total # of male patients < 1 yr on ART",
        "expression": "encounter_datetime >= arv_start_date and gender='M' and timestampdiff(year,birthdate,@endDate) < 1 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"on_art_females_lt_one",
        "label":"on art females lt one",
        "description": "Total # of female patients < 1 yr on ART",
        "expression": "encounter_datetime >= arv_start_date and gender='F' and timestampdiff(year,birthdate,@endDate) < 1 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"on_art_males_below_15",
        "label":"on art males below 15",
        "description": "Total # of male patients below 15 on ART",
        "expression": "encounter_datetime >= arv_start_date and gender='M' and timestampdiff(year,birthdate,@endDate) < 15 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"on_art_females_below_15",
        "label":"on art females below 15",
        "description": "Total # of female patients below 15 on ART",
        "expression": "encounter_datetime >= arv_start_date and gender='F' and timestampdiff(year,birthdate,@endDate) < 15 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"on_art_males_15_and_older",
        "label":"on art males 15 and older",
        "description": "Total # of male patients 15 and older on ART",
        "expression": "encounter_datetime >= arv_start_date and gender='M' and timestampdiff(year,birthdate,@endDate) >= 15 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"on_art_females_15_and_older",
        "label":"on art females 15 and older",
        "description": "Total # of female patients 15 and older on ART",
        "expression": "encounter_datetime >= arv_start_date and gender='F' and timestampdiff(year,birthdate,@endDate) >= 15 and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"on_original_first_line",
        "label":"on original first line",
        "description": "Total # of patients on original ART regimen",
        "expression": "cur_arv_meds = arv_first_regimen and cur_arv_line = 1 and coalesce(transfer_out, out_of_care) is null "
    },
    {
        "name":"on_alternative_first_line",
        "label":"on alternative first line",
        "description": "Total # of patients on original ART regimen",
        "expression": "cur_arv_meds != arv_first_regimen and cur_arv_line = 1 and coalesce(transfer_out, out_of_care) is null"
    },
    {
        "name":"on_second_line_or_higher",
        "label":"on second line or higher",
        "description": "Total # of patients on original ART regimen",
        "expression": "cur_arv_meds != arv_first_regimen and cur_arv_line >= 2 and coalesce(transfer_out, out_of_care) is null "
    },
    {
        "name":"screened_for_tb",
        "label":"screened for tb",
        "description": "Total # of  patients screened for TB",
        "expression": "screened_for_tb and encounter_datetime between @startDate and @endDate"
    },
    {
        "name":"screened_for_tb_males_below_15",
        "label":"screened for tb males below 15",
        "description": "Total # of male patients below 15 screened for TB",
        "expression": "screened_for_tb and gender='M' and timestampdiff(year,birthdate,@endDate) < 15 and encounter_datetime between @startDate and @endDate"
    },
    {
        "name":"screened_for_tb_females_below_15",
        "label":"screened for tb females below 15",
        "description": "Total # of female patients under 15 screened for TB",
        "expression": "screened_for_tb and gender='F' and timestampdiff(year,birthdate,@endDate) < 15 and encounter_datetime between @startDate and @endDate"
    },
    {
        "name":"screened_for_tb_males_15_and_older",
        "label":"screened for tb males 15 and older",
        "description": "Total # of male patients 15 and older screened for TB",
        "expression": "screened_for_tb and gender='M' and timestampdiff(year,birthdate,@endDate) >= 15 and encounter_datetime between @startDate and @endDate"
    },
    {
        "name":"screened_for_tb_females_15_and_older",
        "label":"screened for tb females 15 and older",
        "description": "Total # of female patients 15 and older screened for TB",
        "expression": "screened_for_tb and gender='F' and timestampdiff(year,birthdate,@endDate) >= 15 and encounter_datetime between @startDate and @endDate"
    },
    {
        "name":"is_on_inh_treatment",
        "label":"is_on_inh_treatment",
        "description": "patient is on INH treatment",
        "expression": "tb_prophylaxis_start_date is not null"
    },
    {
        "name":"using_modern_contracept_method",
        "label":"using modern contracept method",
        "description": " # of patients using modern contraceptive methods (IUD, injectables, OCP, e.t.c)",
        "expression": "using_modern_contraceptive_method = 1 and encounter_datetime between @startDate and @endDate"
    },
    {
        "name":"condoms_provided",
        "label":"condoms provided",
        "description": " # of patients provided with condoms",
        "expression": "condoms_provided = 1 and encounter_datetime between @startDate and @endDate"
    },
    {
        "name":"female_gte_18yo_visits",
        "label":"female gte 18yo visits",
        "description": " female patients >= 18",
        "expression": "gender='F' and timestampdiff(year,birthdate,@endDate) >= 18 and encounter_datetime between @startDate and @endDate"
    },
    {
        "name":"scheduled_visits",
        "label":"scheduled visits",
        "description": "Scheduled visit",
        "expression": "(date(encounter_datetime) = date(prev_rtc_date)) and encounter_datetime between @startDate and @endDate "

    },
    {
        "name":"unscheduled_visits",
        "label":"unscheduled visits",
        "description": "Unscheduled visit",
        "expression": "(date(encounter_datetime) != date(prev_rtc_date)) and encounter_datetime between @startDate and @endDate"
    },
    {
        "name":"total_visits",
        "label":"total visits",
        "description": "Total # of Hiv Care Visits",
        "expression": ""
    },
    {
        "name":"on_art",
        "label":"on art",
        "description": "Total #  patient on ART",
        "expression": "encounter_datetime >= arv_start_date and (coalesce(t1.death_date, out_of_care) is null)"
    },
    {
        "name":"ever_on_art",
        "label":"ever on art",
        "description": "Total #  patient ever on ART",
        "expression": "arv_first_regimen_start_date is not null"
    },
    {
        "name":"ever_on_art_below_15",
        "label":"ever on art below 15",
        "description": "Total #  patient ever on ART Below 15yrs",
        "expression": "arv_first_regimen_start_date is not null and timestampdiff(year,birthdate,@endDate) < 15"
    },
    {
        "name":"ever_on_art_males_below_15",
        "label":"ever on art males below 15",
        "description": "Total # of male patients ever on ART Below 15yrs",
        "expression": "arv_first_regimen_start_date is not null and gender='M' and timestampdiff(year,birthdate,@endDate) < 15"
    },
    {
        "name":"ever_on_art_females_below_15",
        "label":"ever on art females below 15",
        "description": "Total # of female patients ever on ART Below 15yrs",
        "expression": "arv_first_regimen_start_date is not null and gender='F' and timestampdiff(year,birthdate,@endDate) < 15"
    },
    {
        "name":"ever_on_art_15_and_older",
        "label":"ever on art 15 and older",
        "description": "Total #  patient ever on ART 15yrs and older",
        "expression": "arv_first_regimen_start_date is not null and timestampdiff(year,birthdate,@endDate) >= 15"
    },
    {
        "name":"ever_on_art_males_15_and_older",
        "label":"ever on art males 15 and older",
        "description": "Total # of male patients ever on ART 15yrs and older",
        "expression": "arv_first_regimen_start_date is not null and gender='M' and timestampdiff(year,birthdate,@endDate) >= 15"
    },
    {
        "name":"ever_on_art_females_15_and_older",
        "label":"ever on art females 15 and older",
        "description": "Total # of female patients ever on ART 15yrs and older",
        "expression": "arv_first_regimen_start_date is not null and gender='F' and timestampdiff(year,birthdate,@endDate) >= 15"
    },
    {
        "name":"encounter_type",
        "label":"encounter type",
        "description": "encounter_type",
        "expression": "encounter_type"
    },
    {
        "name":"visit_num",
        "label":"visit num",
        "description": "visit_num",
        "expression": "visit_num"
    },
    {
        "name":"enrollment_date",
        "label":"enrollment date",
        "description": "enrollment_date",
        "expression": "DATE_FORMAT(enrollment_date,'%m-%d-%Y')"
    },
    {
        "name":"death_date",
        "label":"death date",
        "description": "death_date",
        "expression": "DATE_FORMAT(death_date,'%m-%d-%Y')"
    },
    {
        "name":"scheduled_visit",
        "label":"scheduled visit",
        "description": "scheduled_visit",
        "expression": "scheduled_visit"
    },
    {
        "name":"transfer_out",
        "label":"transfer out",
        "description": "transfer_out",
        "expression": "transfer_out"
    },
    {
        "name":"out_of_care",
        "label":"out of care",
        "description": "out_of_care",
        "expression": "out_of_care"
    },
    {
        "name":"prev_rtc_date",
        "label":"prev rtc date",
        "description": "prev_rtc_date",
        "expression": "DATE_FORMAT(prev_rtc_date,'%m-%d-%Y')"
    },
    {
        "name":"rtc_date",
        "label":"rtc date",
        "description": "rtc_date",
        "expression": "DATE_FORMAT(rtc_date,'%m-%d-%Y')"
    },
    {
        "name":"arv_start_date",
        "label":"arv start date",
        "description": "arv_start_date",
        "expression": "DATE_FORMAT(arv_start_date,'%m-%d-%Y')"
    },
    {
        "name":"arv_first_regimen",
        "label":"arv first regimen",
        "description": "arv_first_regimen",
        "expression": "arv_first_regimen"
    },
    {
        "name":"cur_arv_meds",
        "label":"cur arv meds",
        "description": "cur_arv_meds",
        "expression": "cur_arv_meds"
    },
    {
        "name":"cur_arv_line",
        "label":"cur arv line",
        "description": "cur_arv_line",
        "expression": "cur_arv_line"
    },
    {
        "name":"first_evidence_patient_pregnant",
        "label":"first evidence patient pregnant",
        "description": "first_evidence_patient_pregnant",
        "expression": "DATE_FORMAT(first_evidence_patient_pregnant,'%m-%d-%Y')"
    },
    {
        "name":"edd",
        "label":"edd",
        "description": "edd",
        "expression": "edd"
    },
    {
        "name":"tb_tx_start_date",
        "label":"tb tx start date",
        "description": "tb_tx_start_date",
        "expression": "DATE_FORMAT(tb_tx_start_date,'%m-%d-%Y')"
    },
    {
        "name": "is_on_tb_medication",
        "label": "is_on_tb_medication",
        "description": "Is on TB medication",
        "expression": "tb_tx_start_date is not null and timestampdiff(year,tb_tx_start_date,@startDate) <= 1"
    },
    {
        "name":"pcp_prophylaxis_start_date",
        "label":"pcp prophylaxis start date",
        "description": "pcp_prophylaxis_start_date",
        "expression": "DATE_FORMAT(pcp_prophylaxis_start_date,'%m-%d-%Y')"
    },
    {
        "name":"cd4_resulted",
        "label":"cd4 resulted",
        "description": "cd4_resulted",
        "expression": "cd4_resulted"
    },
    {
        "name":"cd4_resulted_date",
        "label":"cd4 resulted date",
        "description": "cd4_resulted_date",
        "expression": "DATE_FORMAT(cd4_resulted_date,'%m-%d-%Y')"
    },
    {
        "name":"cd4_1",
        "label":"cd4 1",
        "description": "cd4 1",
        "expression": "cd4_1"
    },
    {
        "name":"cd4_1_date",
        "label":"cd4 1 date",
        "description": "cd4 1 date",
        "expression": "DATE_FORMAT(cd4_1_date,'%m-%d-%Y')"
    },
    {
        "name":"cd4_2",
        "label":"cd4 2",
        "description": "cd4 2",
        "expression": "cd4_2"
    },
    {
        "name":"cd4_2_date",
        "label":"cd4 2 date",
        "description": "cd4 2 date",
        "expression": "DATE_FORMAT(cd4_2_date,'%m-%d-%Y')"
    },
    {
        "name":"cd4_percent_1",
        "label":"cd4 percent 1",
        "description": "cd4 percent 1",
        "expression": "cd4_percent_1"
    },
    {
        "name":"cd4_percent_1_date",
        "label":"cd4 percent 1 date",
        "description": "cd4 percent 1 date",
        "expression": "DATE_FORMAT(cd4_percent_1_date,'%m-%d-%Y')"
    },
    {
        "name":"cd4_percent_2",
        "label":"cd4 percent 2",
        "description": "cd4 percent 2",
        "expression": "cd4_percent_2"
    },
    {
        "name":"cd4_percent_2_date",
        "label":"cd4 percent 2 date",
        "description": "cd4 percent 2 date",
        "expression": "DATE_FORMAT(cd4_percent_2_date,'%m-%d-%Y')"
    },
    {
        "name":"vl_resulted",
        "label":"vl resulted",
        "description": "vl resulted",
        "expression": "vl_resulted"
    },
    {
        "name":"vl_resulted_date",
        "label":"vl resulted date",
        "description": "vl resulted date",
        "expression": "DATE_FORMAT(vl_resulted_date,'%m-%d-%Y')"
    },
    {
        "name":"vl_1",
        "label":"vl 1",
        "description": "vl 1",
        "expression": "vl_1"
    },
    {
        "name":"vl_1_date",
        "label":"vl 1 date",
        "description": "vl 1 date",
        "expression": "DATE_FORMAT(vl_1_date,'%m-%d-%Y')"
    },
    {
        "name":"vl_2",
        "label":"vl 2",
        "description": "vl 2",
        "expression": "vl_2"
    },
    {
        "name":"vl_2_date",
        "label":"vl 2 date",
        "description": "vl 2 date",
        "expression": "DATE_FORMAT(vl_2_date,'%m-%d-%Y')"
    },
    {
        "name":"vl_order_date",
        "label":"vl order date",
        "description": "vl order date",
        "expression": "DATE_FORMAT(vl_order_date,'%m-%d-%Y')"
    },
    {
        "name":"cd4_order_date",
        "label":"cd4 order date",
        "description": "cd4 order date",
        "expression": "DATE_FORMAT(cd4_order_date,'%m-%d-%Y')"
    },
    {
        "name":"attended",
        "label":"attended",
        "description": "attended",
        "expression": ""
    },
    {
        "name":"scheduled",
        "label":"scheduled",
        "description": "scheduled",
        "expression": ""
    },
    {
        "name":"defaulted",
        "label":"defaulted",
        "description": "defaulted",
        "expression": ""
    },
    {
        "name":"not_attended",
        "label":"not attended",
        "description": "not attended",
        "expression": "date(t1.rtc_date)<>date(next_clinical_datetime_hiv)"
    },
    {
        "name":"has_not_returned",
        "label":"has not returned",
        "description": "has not returned",
        "expression": "date(t1.rtc_date) >=@startDate and date(t1.rtc_date)< date(now()) and next_clinical_datetime_hiv is null and death_date is null and transfer_out is null"
    },
    {
        "name":"virally_suppressed_in_past_year",
        "label":"virally suppressed in past year",
        "description": "# of patient(s) who are virally suppressed in the past one year",
        "expression": "vl_1 < 1000 and  timestampdiff(week,vl_1_date,encounter_datetime) <= 52"
    },
    {
        "name":"viral_load_resulted_in_past_year",
        "label":"viral load done in past year",
        "description": "patient(s) whose viral load has resulted in the past one year",
        "expression": "vl_1 is not null and  timestampdiff(week,vl_1_date,encounter_datetime) <= 52"
    },
    {
        "name":"virally_suppressed",
        "label":"virally suppressed",
        "description": "# of patient(s) who are virally suppressed",
        "expression": "timestampdiff(month,arv_start_date,encounter_datetime) >= 6 and timestampdiff(day, date(vl_1_date), date(t2.endDate)) <= 365 and (coalesce(t1.death_date, out_of_care) is null) and vl_1 < 1000"
    },
    {
        "name":"not_virally_suppressed",
        "label":"not virally suppressed",
        "description": "# of patient(s) who are not virally suppressed",
        "expression": "timestampdiff(month,arv_start_date,encounter_datetime) >= 6 and timestampdiff(day, date(vl_1_date), date(t2.endDate)) <= 365 and (coalesce(t1.death_date, out_of_care) is null) and vl_1 >= 1000"
    },
    {
        "name":"perc_virally_suppressed",
        "label":"perc virally suppressed",
        "description": "% of  patient(s) who are virally suppressed",
        "expression": ""
    },
    {
        "name":"not_virally_suppressed_in_past_year",
        "label":"not virally suppressed in past year",
        "description": "# of patient(s) who are not virally suppressed in the past one year",
        "expression": "vl_1> 1000 and  timestampdiff(week,vl_1_date,encounter_datetime) <= 52"
    },
    {
        "name":"cd4_order_date",
        "label":"cd4 order date",
        "description": "cd4_order_date",
        "expression": "DATE_FORMAT(cd4_order_date,'%m-%d-%Y')"
    },
    {
        "name":"perc_virally_suppressed_in_past_year",
        "label":"perc virally suppressed in past year",
        "description": "% of  patient(s) who are virally suppressed in the past one year",
        "expression": ""
    },
    {
        "name":"perc_not_virally_suppressed_in_past_year",
        "label":"perc not virally suppressed in past year",
        "description": "% of  patient(s) who are not virally suppressed in the past one year",
        "expression": ""
    },
    {
        "name":"perc_on_arvs",
        "label":"perc on arvs",
        "description": "% of patients who are on ARVs",
        "expression": ""
    },
    {
        "name":"perc_in_care",
        "label":"perc in care",
        "description":"% of patients who are in Care",
        "expression":""
    },
    {
        "name":"perc_on_arvs_lte_6_months",
        "label":"perc on arvs lte 6 months",
        "description":"% of patients who have been on ARVs for less than 6 months",
        "expression":""
    },
    {
        "name":"perc_on_arvs_gt_6_months",
        "label":"perc on arvs gt 6 months",
        "description":"% of patients who have been on  ARVs for more than 6 months",
        "expression":""
    },
    {
        "name":"perc_on_arv_first_line",
        "label":"perc on arv first line",
        "description":"% of patients on ARVs first line",
        "expression":""
    },
    {
        "name":"perc_on_arv_second_line",
        "label":"perc on arv second line",
        "description":"% of patients on ARVs second line",
        "expression":""
    },
    {
        "name":"perc_on_arv_gt_third_line",
        "label":"perc on arv gt third line",
        "description":"% of patients on ARVs third line or more",
        "expression":""
    },
    {
        "name":"perc_with_pending_viral_load",
        "label":"perc with pending viral load",
        "description":"% of patients with pending viral load",
        "expression":""
    },
    {
        "name":"on_arvs_gt_26_weeks",
        "label":"on arvs gt 26 weeks",
        "description": "# of patient(s) who have been on ARVs 26 weeks or more",
        "expression": "timestampdiff(week,arv_start_date,encounter_datetime) > 26"
    },
    {
        "name":"needs_vl_coded",
        "label":"needs vl coded",
        "description": "Patient level coded indicator that determines whether patient requires a Viral load",
        "expression": "case when (cur_arv_meds is not null and vl_1 > 1000) and (timestampdiff(day,vl_1_date, @referenceDate) >= 90) then 1 when (timestampdiff(month,arv_start_date, @referenceDate) <= 12) and (vl_1_date is null or timestampdiff(month,vl_1_date, @referenceDate) >= 6)  and (timestampdiff(month,arv_start_date, @referenceDate)>=6) then 2 when (timestampdiff(month,arv_start_date, @referenceDate) >= 12) and (vl_1_date is null or timestampdiff(month,vl_1_date, @referenceDate) >= 12) then 3 else 0 end"
    },
    {
        "name":"needs_vl_in_period",
        "label":"needs vl in period",
        "description": "Patient level coded indicator that determines whether patient requires a Viral load",
        "expression": "case when (cur_arv_meds is not null and vl_1 > 1000) and (timestampdiff(day,vl_1_date, @endDate) >= 90) then true when (timestampdiff(month,arv_start_date, @endDate) <= 12) and (vl_1_date is null or timestampdiff(month,vl_1_date, @endDate) >= 6)  and (timestampdiff(month,arv_start_date, @endDate)>=6) then true when (timestampdiff(month,arv_start_date, @endDate) >= 12) and (vl_1_date is null or timestampdiff(month,vl_1_date, @endDate) >= 12) then true else false end"
    },
    {
        "name":"months_since_last_vl_date",
        "label":"months since last vl date",
        "description": "Number of months since last vl date",
        "expression": "timestampdiff(month,vl_1_date, @referenceDate)"

    },
    {
        "name":"overdue_vl_lab_order",
        "label":"overdue vl lab order",
        "description": "Patient level coded indicator that determines whether patient Viral load order is overdue",
        "expression": "case when (timestampdiff(day,vl_order_date, @referenceDate) >= 14) and (vl_1_date is null or vl_order_date > vl_1_date) and vl_error <> 1 then timestampdiff(day,vl_order_date, @referenceDate) else 0 end "
    },
    {
        "name":"ordered_vl_has_error",
        "label":"latest ordered vl has error",
        "description": "Patient level coded indicator that determines whether patient Viral load order is overdue",
        "expression": "case when vl_error= 1 then 1 else 0 end "
    },
    {
        "name":"needs_cd4_count_coded",
        "label":"needs cd4 count coded",
        "description": "Patient level coded indicator that determines whether patient requires a Viral load",
        "expression": "case when cur_arv_meds is not null and vl_1 > 1000 and timestampdiff(day,cd4_1_date, @referenceDate) >= 90 then 1 when timestampdiff(month,arv_start_date, @referenceDate) <= 12 and (cd4_1_date is null or timestampdiff(month,cd4_1_date, @referenceDate) > 6) then 2 when timestampdiff(month,arv_start_date, @referenceDate) > 12 and (cd4_1_date is null or timestampdiff(month,cd4_1_date, @referenceDate) > 12) then 3 else 0 end"
    },
    {
        "name":"overdue_cd4_count_lab_order",
        "label":"overdue cd4 count lab order",
        "description": "Patient level coded indicator that determines whether patient Viral load order is overdue",
        "expression": "case when timestampdiff(day,cd4_order_date, @referenceDate) > 30 and cd4_1_date is null or cd4_order_date > cd4_1_date then timestampdiff(day,cd4_order_date, @referenceDate) else 0 end "
    },
    {
        "name":"encounters_count",
        "label":"encounters_count",
        "description": "",
        "expression": ""
    },
    {
        "name":"patients_requiring_vl",
        "label":"patients requiring vl",
        "description": "patients requiring vl",
        "expression": "timestampdiff(month,arv_start_date,encounter_datetime) >= 6"
    },
    {
        "name":"tested_appropriately",
        "label":"tested appropriately",
        "description": "tested appropriately",
        "expression": "timestampdiff(month, arv_start_date, encounter_datetime) >= 6 and timestampdiff(day, date(vl_1_date), date(t2.endDate)) <= 365"
    },
    {
        "name":"not_tested_appropriately",
        "label":"not tested appropriately",
        "description": "not tested appropriately",
        "expression": "timestampdiff(month, arv_start_date, encounter_datetime) >= 6 and (timestampdiff(day,vl_1_date, date(t2.endDate)) > 365 or vl_1_date is null)"
    },
    {
        "name":"due_for_annual_vl",
        "label":"due for annual vl",
        "description": "due for annual vl this month",
        "expression": "timestampdiff(month, arv_start_date, encounter_datetime) >= 6 and (DATE_ADD(vl_1_date, INTERVAL 1 YEAR)  between  DATE_FORMAT(t2.endDate,'%Y-%m-01') and t2.endDate) and (orders.date_created is null or orders.concept_id!=856)"
    },
    {
        "name":"pending_vl_orders",
        "label":"pending vl orders",
        "description": "pending vl orders",
        "expression": "orders.concept_id=856 and (date(orders.date_created)  between  DATE_FORMAT(t2.endDate,'%Y-%m-01') and t2.endDate) and date(vl_1_date) != date(orders.date_created) and  date(vl_1_date) < DATE_FORMAT(t2.endDate,'%Y-%m-01')"
    },
    {
        "name":"missing_vl_order",
        "label":"missing vl and vl order",
        "description": "on ART without VL and missing vl order",
        "expression": "timestampdiff(month, arv_start_date, encounter_datetime) >= 6 and (timestampdiff(day,vl_1_date, date(t2.endDate)) > 365 or vl_1_date is null) and (orders.date_created is null or orders.concept_id!=856)"
    },
    {
        "name":"perc_tested_appropriately",
        "label":"perc tested appropriately",
        "description":"perc tested appropriately",
        "expression":""
    },
    {
        "name":"deceased_patients",
        "label":"Deceased Patients",   
        "description": "Deceased Patients",
        "expression": "patient_care_status=159"
    },
    {
        "name":"untraceable_patients",
        "label":"untraceable patients",
        "description": "untraceable patients",
        "expression": "patient_care_status=9079"
    },
    {
        "name":"transferred_out_patients",
        "label":"transferred out patients",
        "description": "transferred out patients",
        "expression": "patient_care_status=1287"
    },
    {
        "name":"hiv_negative_patients",
        "label":"hiv negative patients",
        "description": "hiv negative patients",
        "expression": "patient_care_status=9036"
    },
    {
        "name":"patients_continuing_care",
        "label":"patients continuing care",
        "description": "patients continuing care",
        "expression": "(patient_care_status=6101 and timestampdiff(day,rtc_date, @endDate) < 90 and is_clinical_encounter=1 ) or (patient_care_status=6101 and is_clinical_encounter=0 and @endDate > DATE_ADD(prev_clinical_rtc_date_hiv, INTERVAL 90 DAY))"
    },
    {
        "name":"self_disengaged_from_care",
        "label":"self disengaged from care",
        "description": "self disengaged from care",
        "expression": "patient_care_status=9083"
    },
    {
        "name":"defaulters",
        "label":"defaulters",
        "description": "defaulters",
        "expression": "(patient_care_status=6101 and timestampdiff(day,if(is_clinical_encounter=1,rtc_date,prev_clinical_rtc_date_hiv), @endDate) > 90)"
    },
    {
        "name":"transfer_to_MNCH",
        "label":"transfer to MNCH",
        "description": "transfer to MNCH",
        "expression": "patient_care_status=9504"
    },
    {
        "name":"other_patient_care_status",
        "label":"other status",
        "description": "other_status",
        "expression": "patient_care_status not in (159,9079,1287,9036,6101,9083)"
    },
    {
        "name":"on_nevirapine",
        "label":"patient on_nevirapine",
        "description": "patient on_nevirapine",
        "expression": "cur_arv_meds regexp '(631|6467|792)'"
    },
    {
        "name":"on_lopinavir",
        "label":"patient on_lopinavir",
        "description": "patient on_lopinavir",
        "expression": "cur_arv_meds regexp '(9026|794)'"
    },
    {
        "name":"on_efavirenz",
        "label":"patient on_efavirenz",
        "description": "patient on_efavirenz",
        "expression": "cur_arv_meds regexp '(633|6964)'"
    },
    {
        "name":"on_atazanavir",
        "label":"patient on_atazanavir",
        "description": "patient on_raltegravir",
        "expression": "cur_arv_meds regexp '(6159|6160)'"
    },
    {
        "name":"on_raltegravir",
        "label":"patient on_raltegravir",
        "description": "patient on_raltegravir",
        "expression": "cur_arv_meds regexp '(6156)'"
    },
    {
        "name":"on_other_arv_drugs",
        "label":"patient on_other_arv_drugs",
        "description": "patient on_other_arv_drugs",
        "expression": "not (cur_arv_meds regexp '(6156|6159|6160|633|6964|9026|794|631|6467|792)')"
    },
    {
        "name":"not_on_arv",
        "label":"patient not_on_arv",
        "description": "patient not_on_arv ",
        "expression": "cur_arv_meds is null"
    },
    {
        "name":"on_second_line_not_suppressed",
        "label":"on second line not suppressed",
        "description": "patient on second line not suppressed",
        "expression": "vl_1 > 1000 and cur_arv_line > 1"
    },
    {
        "name":"newly_enrolled",
        "label":"newly enrolled",
        "description": "patients who are newly enrolled",
        "expression": "is_clinical_encounter=1 and prev_clinical_datetime_hiv is null"
    },
    {
        "name":"new_viral_load_present",
        "label":"new viral load present",
        "description": "patient has a new viral load result",
        "expression": "DATE_ADD(vl_1_date, INTERVAL 90 DAY) > NOW()"
    },
    {
        "name":"not_on_arvs_cd4_lte_500",
        "label":"patient not_on_arvs_cd4_lte_500",
        "description": "patients who qualify for ART but are not on therapy",
        "expression": "arv_start_date is null and cd4_1 < 500"
    },
    {
        "name":"total_with_vl",
        "label":"total with vl",
        "description": "The number of patients who have at least one viral load resulted within 366 days of the end_date (can be more than 1 year",
        "expression": "timestampdiff(day,vl_1_date,@endDate) <= 366 AND TIMESTAMPDIFF(DAY, vl_2_date, @endDate) <= 366"
    },
    {
        "name":"num_with_two_vls_past_year",
        "label":"num with two vls past year",
        "description": "The number of patients who have two viral load results within 366 days of end_date",
        "expression": "timestampdiff(day,t1.vl_1_date,@endDate) <= 366 and timestampdiff(day,t1.vl_2_date,@endDate) <= 366"
    },
    {
        "name":"num_with_only_one_vl_past_year",
        "label":"num with only one vl past year",
        "description": "the number of patients who have only one viral in the past year and no other viral load in past year",
        "expression": "timestampdiff(day,t1.vl_1_date,@endDate) <= 366 and timestampdiff(day,t1.vl_2_date,@endDate) <= 366"
    },
    {
        "name":"num_with_at_least_one_vl_past_year",
        "label":"num with at least one vl past year",
        "description": "the number of patients with at least one viral in the past year and no other viral load in past year",
        "expression": "timestampdiff(day,t1.vl_1_date,@endDate) <= 366"
    },
    {
        "name":"second_vl_gt_one_yo",
        "label":"second vl gt one year",
        "description": "The number of patients who only have a single viral load resulted within 366 days of end_date and another viral load older than one year from year from end_date",
        "expression": "timestampdiff(day,vl_1_date,@endDate) <= 366 and timestampdiff(day,vl_2_date,@endDate) > 366"
    },
    {
        "name":"last_vl_undetected",
        "label":"last vl undetected",
        "description": "Total # of patients with last vl undetected",
        "expression": "timestampdiff(day,vl_1_date,@endDate) <= 366 and vl_1 = 0"
    },
    {
        "name":"last_vl_unsuppressed",
        "label":"last vl unsuppressed",
        "description": "Total  # of patients which have a VL in past year which was unsuppressed.",
        "expression": "timestampdiff(day,vl_1_date,@endDate) <= 366 and vl_1 >= 1000"
    },
    {
        "name":"last_vl_suppressed",
        "label":"last vl suppressed",
        "description": "Total # of patients which have a VL in past year which was unsuppressed",
        "expression": "timestampdiff(day,vl_1_date,@endDate) <= 366 and vl_1 < 1000"
    },
    {
        "name":"perc_unsuppressed",
        "label":"perc unsuppressed",
        "description": "The number of patients with a unsuppressed viral load within 1 year from end date divided by the number of patients with a viral load within 1 year of end date",
        "expression": ""
    },
    {
        "name":"one_vl_unsuppressed",
        "label":"one vl unsuppressed",
        "description": "The number of patients with a single vl within one year of end_date and that vl >= 1000",
        "expression": "timestampdiff(day,vl_1_date,@endDate) <= 366 and (vl_2 is null or timestampdiff(day,vl_2_date,@endDate) > 366) and vl_1 >= 1000"
    },
    {
        "name":"one_vl_suppressed",
        "label":"one vl suppressed",
        "description": "The number of patients with a single vl within one year of end_date and that VL < 1000",
        "expression": "timestampdiff(day,vl_1_date,@endDate) <= 366 and (vl_2 is null or timestampdiff(day,vl_2_date,@endDate) > 366) and vl_1 < 1000"
    },
    {
        "name":"num_requiring_followup_vl",
        "label":"num requiring followup vl",
        "description": "The number of patients with viral load in the past year in which the VL >= 1000 and it’s been more than 90 days between that VL and end_date.",
        "expression": "timestampdiff(day,vl_2_date,@endDate) <= 366 AND vl_2 >1000 || (timestampdiff(day,vl_1_date,@endDate) <= 366 AND vl_1 > 1000 AND timestampdiff(day,vl_1_date,@endDate) > 90 AND (vl_2 is null or vl_2_date > 1 ))"
    },
    {
        "name":"getting_followup_vl",
        "label":"getting followup vl",
        "description": "Number of patients who got a follow-up viral load who needed one",
        "expression": "TIMESTAMPDIFF(DAY, vl_2_date,@endDate) <= 366 AND vl_2 > 1000"
    },
    {
        "name":"getting_followup_vl_180_days",
        "label":"getting followup vl",
        "description": "Number of patients who got a follow-up viral load who needed one and the follow up is within 180 days",
        "expression": "TIMESTAMPDIFF(DAY, vl_2_date,@endDate) <= 366 AND vl_2 > 1000 AND TIMESTAMPDIFF(DAY, vl_1_date,@endDate) <= 180"
    },
    {
        "name":"perc_getting_followup_vl",
        "label":"perc getting followup vl",
        "description": "The numerator is number of patients who got a follow-up viral load who needed one. The denominator is the number of patients who required a follow-up (num_requiring_followup_vl)",
        "expression": ""
    },
    {
        "name":"perc_getting_followup_vl_180_days",
        "label":"perc getting followup vl 180 days",
        "description": "The numerator is number of patients who got a follow-up viral load within 180 days who needed one. The denominator is the number of patients who required a follow-up (num_requiring_followup_vl)",
        "expression": ""
    },
    {
        "name":"one_vl_unsuppressed_gt_90_days",
        "label":"one vl unsuppressed gt 90 days",
        "description": "The number of patients who have a single viral load in the past year which is >= 1000 and the difference between end_date and the vl date is > 90 days",
        "expression": "TIMESTAMPDIFF(DAY, vl_1_date, @endDate) <= 366  AND (vl_2 IS NULL  OR TIMESTAMPDIFF(DAY, vl_2_date, @endDate > 366)  AND vl_1 >= 1000  AND TIMESTAMPDIFF(DAY, vl_1_date, @endDate > 90"
    },
    {
        "name":"one_vl_unsuppressed_gt_180_days",
        "label":"one vl unsuppressed gt 180 days",
        "description": "The number of patients who have a single viral load in the past year which is >= 1000 and the difference between end_date and the vl date is > 180 days",
        "expression": "TIMESTAMPDIFF(DAY, vl_1_date, @endDate) <= 366  AND (vl_2 IS NULL  OR TIMESTAMPDIFF(DAY, vl_2_date, @endDate > 366)  AND vl_1 >= 1000  AND TIMESTAMPDIFF(DAY, vl_1_date, @endDate > 180"
    },
    {
        "name":"avg_time_since_last_unsuppressed_vl_one_vl",
        "label":"avg time since last unsuppressed vl one vl",
        "description": "Avg time since last unsuppressed vl one vl",
        "expression": "timestampdiff(day,vl_1_date,@endDate) <= 366 and vl_1 > 1000 and (vl_2 is null or timestampdiff(day,vl_2_date,@endDate) > 366)"
    },
    {
        "name":"total_with_two_vls",
        "label":"total with two vls",
        "description": "Total # of patients with two vls within one year of end_date.",
        "expression": "timestampdiff(day,vl_1_date,@endDate) <= 366 and timestampdiff(day,vl_2_date,@endDate) <= 366 and vl_2 >= 1000 and timestampdiff(day,vl_2_date,vl_1_date) > 60"
    },
    {
        "name":"init_vl_unsuppressed_follow_up_unsuppressed",
        "label":"init vl unsuppressed follow up unsuppressed",
        "description": "Total #  of patients with an initial viral load >= 1000 with a follow-up viral load >= 1000 where both viral loads are within one year of end_date",
        "expression": "timestampdiff(day,vl_1_date,@endDate) <= 366 and vl_1 >= 1000 and timestampdiff(day,vl_2_date,@endDate) <= 366 and vl_2 >= 1000 and timestampdiff(day,vl_2_date,vl_1_date) > 60"
    },
    {
        "name":"follow_up_suppressed",
        "label":"follow up suppressed",
        "description": "Total # of patients with an initial viral load >= 1000 with a follow-up viral load < 1000 where both viral loads are within one year of end_date",
        "expression": "timestampdiff(day,vl_1_date,@endDate) <= 366 and vl_1 >= 1000 and timestampdiff(day,vl_2_date,@endDate) <= 366 and vl_2 < 1000 and timestampdiff(day,vl_2_date,vl_1_date) > 60"
    },
    {
        "name":"perc_fu_suppressed",
        "label":"perc fu suppressed",
        "description": "Of the cohort of patients with a VL >= 1000, what percentage have a follow-up that is suppressed. The denominator is all the patients with a VL >= 1000 within one year of end_date AND have a follow-up viral load within 1 year of end date",
        "expression": ""
    },
    {
        "name":"avg_length_btwn_vls_first_unsuppressed",
        "label":"avg length btwn vls first unsuppressed",
        "description": "For patients with an initial VL >= 1000 within 1 year of end_date, the average number of days until a follow-up viral load was ordered.",
        "expression": "timestampdiff(day,vl_1_date,@endDate) <= 366 and timestampdiff(day,vl_2_date,@endDate) <= 366 and vl_2 >= 1000 and timestampdiff(day,vl_2_date,vl_1_date) > 60"
    },
    {
        "name":"days_since_last_vl_first_unsuppressed",
        "label":"days since last vl first unsuppressed",
        "description": "avg days since last vl first unsuppressed",
        "expression": "timestampdiff(day,vl_1_date,@endDate) <= 366 and timestampdiff(day,vl_2_date,@endDate) <= 366 and vl_2 >= 1000 and timestampdiff(day,vl_2_date,vl_1_date) > 60"
    },
    {
        "name":"no_switch_after_unsuppressed",
        "label":"no switch after unsuppressed",
        "description": "# The number of patients switched to new regiment after the previous vl vl >= 1000",
        "expression": "arv_start_date < vl_1_date and vl_1 >= 1000 and timestampdiff(day,vl_1_date,@endDate) <= 366"
    },
    {
        "name":"switch_after_unsuppressed",
        "label":"switch after unsuppressed",
        "description": "# of patients  with switch after unsuppressed",
        "expression": "arv_start_date > vl_1_date and vl_1 >= 1000 and timestampdiff(day,vl_1_date,@endDate) <= 366"
    },
    {
        "name":"no_switch_after_unsuppressed_x1",
        "label":"no switch after unsuppressed x1",
        "description": "# The number of patients remaining on same regimen after the previous vl >= 1000",
        "expression": "arv_start_date < vl_1_date and vl_1 >= 1000 and timestampdiff(day,vl_1_date,@endDate) <= 366  and (vl_2 < 1000 or timestampdiff(day,vl_2_date,@endDate) <= 366)"
    },
    {
        "name":"switch_after_unsuppressed_x1",
        "label":"switch after unsuppressed x1",
        "description": "# of patients switched to new regimen after a single, unsuppressed VL in past year",
        "expression": "arv_start_date > vl_1_date and vl_1 >= 1000 and timestampdiff(day,vl_1_date,@endDate) <= 366  and (vl_2 < 1000 or timestampdiff(day,vl_2_date,@endDate) <= 366)"
    },
    {
        "name":"no_switch_after_unsuppressed_x_2",
        "label":"no switch after unsuppressed x2",
        "description": "# of patients not switched to new regimen after two unsuppressed VLs in past year",
        "expression": "arv_start_date < vl_1_date and vl_1 >= 1000 and timestampdiff(day,vl_1_date,@endDate) <= 366 and vl_2 >= 1000 and timestampdiff(day,vl_2_date,@endDate) <= 366"
    },
    {
        "name":"switch_after_unsuppressed_x_2",
        "label":"switch after unsuppressed x 2",
        "description": "# of patients switched to new regimen after two unsuppressed VLs in past year",
        "expression": "arv_start_date > vl_1_date and vl_1 >= 1000 and timestampdiff(day,vl_1_date,@endDate) <= 366  and (vl_2 < 1000 or timestampdiff(day,vl_2_date,@endDate) <= 366)"
    },
    {
        "name":"avg_time_to_switch_after_unsuppressed",
        "label":"avg time to switch after unsuppressed",
        "description": "Average time to switch a patient to a new regimen after an unsuppressed viral load",
        "expression": "arv_start_date > vl_1_date and vl_1 >= 1000 and timestampdiff(day,vl_1_date,@endDate) <= 366"
    },
    {
        "name":"avg_time_to_switch_after_unsuppressed_x2",
        "label":"avg time to switch after unsuppressed x2",
        "description": "Average time to switch a patient to a new regimen after two two unsuppressed viral loads",
        "expression": "arv_start_date > vl_1_date  AND vl_1 >= 1000  AND TIMESTAMPDIFF(DAY, vl_1_date, NOW()) <= 366  AND vl_2 > 1000  AND TIMESTAMPDIFF(DAY, vl_2_date, NOW()) <= 366,  TIMESTAMPDIFF(DAY,vl_1_date,  arv_start_date)"
    },
    {
        "name":"avg_days_to_switch_after_unsuppressed",
        "label":"avg days to switch after unsuppressed",
        "description": "avg time to switch after unsuppressed",
        "expression": "arv_start_date > vl_1_date and vl_1 >= 1000"
    },
    {
        "name":"num_with_vl_after_switch",
        "label":"num with vl after switch",
        "description": "# of patients with vl after switch",
        "expression": "arv_start_date > vl_2_date and arv_start_date < vl_1_date"
    },
    {
        "name":"num_with_vl_after_switch_suppressed",
        "label":"num with vl after switch suppressed",
        "description": "# of patients with suppressed follow-up viral load after a regiment switch",
        "expression": "arv_start_date > vl_2_date and arv_start_date < vl_1_date and vl_1 < 1000"
    },
    {
        "name":"num_with_vl_after_switch_unsuppressed",
        "label":"num with vl after switch unsuppressed",
        "description": "# of patients with unsuppressed follow-up viral load after a regimen switch",
        "expression": "arv_start_date > vl_2_date and arv_start_date < vl_1_date and vl_1 >= 1000"
    },
    {
        "name":"perc_switched_with_suppressed_fu",
        "label":"perc switched with suppressed fu",
        "description": "% of patients switched with suppressed f/u VL",
        "expression": ""
    }
]
